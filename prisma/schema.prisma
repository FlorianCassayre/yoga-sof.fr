generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model admins {
  email String @unique(map: "email") @db.VarChar(255)
}

model users {
  id          Int    @id @default(autoincrement())
  id_provider String @db.VarChar(255)
  email       String @db.VarChar(255)
  provider    String @db.VarChar(255)
  name        String @db.VarChar(255)
  created_at  DateTime @default(now())
  updated_at  DateTime @updatedAt
  emails emails[]

  @@unique([id_provider, provider], map: "id_provider_unique_constraint")
}

enum Role {
  YOGA_ADULT
  YOGA_CHILD
  YOGA_ADULT_CHILD
}

// For validation, follow:
// https://github.com/prisma/prisma/issues/3102
// https://github.com/prisma/prisma/issues/3388

model session_models {
  id          Role @unique(map: "id")
  spots       Int @db.UnsignedInt
  weekday     Int @db.UnsignedTinyInt
  time_start  String @db.VarChar(5)
  time_end    String @db.VarChar(5)
}

model sessions {
  id          Int @id @default(autoincrement())
  type        Role
  spots       Int @db.UnsignedInt
  date_start  DateTime @db.Timestamp(0)
  date_end    DateTime @db.Timestamp(0)
  is_canceled Boolean @default(false)
  notes       String? @db.Text
  created_at  DateTime @default(now())
  updated_at  DateTime @updatedAt
}

enum EmailType {
  OTHER
}

model emails {
  id Int @id @default(autoincrement())
  user_id Int
  user users @relation(fields: [user_id], references: [id])
  type EmailType
  destination_address String @db.VarChar(255)
  subject String @db.Text
  message String @db.Text
  created_at  DateTime @default(now())
  sent_at DateTime?
}
